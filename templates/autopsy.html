<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie-edge">
        <title>Core Dump Analyzer</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.3/css/bootstrap.min.css" integrity="sha384-MIwDKRSSImVFAZCVLtU0LMDdON6KVCrZHyVQQj6e8wIEJkW4tvwqXrbMIya1vriY" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
        <link rel="stylesheet" href="{{ url_for('static', filename='autopsy.css') }}">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora" type="text/css">
    </head>
    <body>
        <nav class="navbar navbar-full navbar-dark bg-inverse">
            <p class="navbar-brand">Autopsy</p>
            <div class="nav navbar-nav">
                <div class="dropdown">
                    <div class="nav-item pull-xs-right dropdown-toggle" id="change-key" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-key" aria-hidden="true"></i><span id="uuid">{{ uuid }}</span></div>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="change-key">
                        <button class="dropdown-item" id="load-modal-button" type="button" data-toggle="modal" data-target="#load-modal">Load key…</button>
                        <button class="dropdown-item" type="button" data-toggle="modal" data-target="#generate-modal">Generate new key…</button>
                    </div>
                </div>
            </div>
        </nav>
        <div class="modal fade" id="load-modal" tabindex="-1" role="dialog" aria-labelledby="load-modal" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title" id="load-modal">Load key</h4>
                    </div>
                    <div class="modal-body">
                        <label for="load-key">A key must be in valid version 4 <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier" target="_blank">UUID</a>  format, including hyphens.</label>
                        <div class="input-group" id="key-group">
                            <span class="input-group-addon" id="key-icon"><i class="fa fa-key" aria-hidden="true"></i></span>
                            <input type="text" class="form-control" id="load-key" placeholder="01234567-89ab-cdef-0123-456789abcdef" spellcheck="false" aria-describedby="key-icon">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" id="load-button" disabled>Load</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="generate-modal" tabindex="-1" role="dialog" aria-labelledby="generate-modal" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title" id="generate-modal">Generate new key</h4>
                    </div>
                    <div class="modal-body">
                        <p>Remember to save your old key before generating a new key if you wish to revisit these core files.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" id="generate-button">Generate</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="main">
            <div id="cores">
            </div><div id="analyzer">
                <div class="upload">
                    <div class="form">
                        <label class="file">
                            <input type="file" name="thefile" id="file-input">
                            <span id="file-picker">
                                <div id="downloaded">
                                </div>
                                <div id="file-container">
                                    <div id="progress">
                                    </div>
                                    <div id="file-name">
                                        Choose file…
                                    </div>
                                </div>
                                <div class="browse-clickable" id="browse">
                                    Browse
                                </div>
                            </span>
                        </label>
                    </div><button type="button" class="btn btn-primary" disabled id="upload-button">Upload</button>
                </div>
                <div class="btn-toolbar" id="commands" role="toolbar" aria-label="commands">
                    <div class="btn-group" role="group" aria-label="report">
                        <button type="button" id="gen-report" class="btn btn-secondary btn-command" disabled>gen_core_report</button>
                    </div>
                </div>
                <div id="command-form">
                    <input type="text" class="form-control" id="command-input" placeholder="Enter command…" spellcheck=false disabled>
                    <div id="autocomplete">
                    </div>
                </div>
                <div class="output">
                    <p id="output-text"></p>
                </div>
            </div>
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.3/js/tether.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.3/js/bootstrap.min.js" integrity="sha384-ux8v3A6CPtOTqOzMKiuo3d/DomGaaClxFYdCu2HPMBEkf6x2xiDyJ7gkXU0MWwaD" crossorigin="anonymous"></script>
        <script src="{{ url_for('static', filename='autopsy.js') }}"></script>
        <script type="text/javascript">
            loadCoredumps({{ coredumps|tojson }});
        </script>
    </body>
</html>
